# 2025-08-21/29 - Repos and Supabase

## Repos
I have implemented preliminary repo methods for all repos necessary for the index functionalities. (I am not yet sure that they'll work as planned, I need to develop test cases and create some dummy data for my database first).

## Supabase
Using some template register/login screens from a sample powersync project that they provide I have successfully registered and logged in to my supabase database and connected to my powersync cloud service!

## Next Steps
I am very excited to develop some dummy data and begin testing my repo methods to then build some ui elements to display pokemon data, and will continue to do so today (the 29th). I am committing here to have a good benchmark to revert back to if I break anything.

## Realtime Notes
- ~~Realized I should modify the viewmodels of the respective slot elements after adjustment of slot within database, rather than replace them in the slot~~ Remembered I'm not doing this because of powersyncs weird requirements that make join tables wonky.
- Removing the recently introduced teamPosition field from slots because I can just store slot ids in a map with a position pairing.
    - Removing the teamPosition requires the introduction of the team members map to the teams table. So now teams will reference slots and slots will reference teams. I don't love that. Maybe remove the team_id field from slots entirely. What are the repurcussions of this? No team_id means that slots will need to be found via the reference in the team memberIds map. It makes team loading more straightforward because there won't be a loading of two different components team/memberIds. This may have been the better solution from the outset
    - Ah but then I won't be able to load them into the buckets properly unless I store each team member as a separate database entry, so dual references might be mandatory (they are, powersync recommends denormalization of backend)
- Plan to initialize slots when navigating to teambuilder view if the slotid is null
- Current weaknesses: Teams must have six members, and pokemon must have four moves
- Spending time figuring out the creation flow of teams and slots
- Removed user_id from slots table as I don't think its necessary because bank contains that information
- Mildly regretting powersync selection as it is greatly complicating the retrieval of information from what were join tables
- Successfully connected to supabase and registered/logged in using an iPhone 15 simulator!!